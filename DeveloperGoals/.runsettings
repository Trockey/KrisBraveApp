<?xml version="1.0" encoding="utf-8"?>
<RunSettings>
  <!-- Konfiguracja testów dla DeveloperGoals -->
  
  <RunConfiguration>
    <!-- Maksymalny czas na zakończenie wszystkich testów (w milisekundach) -->
    <TestSessionTimeout>3600000</TestSessionTimeout>
    
    <!-- Liczba równoległych egzekucji testów -->
    <MaxCpuCount>0</MaxCpuCount>
    
    <!-- Rezultaty testów -->
    <ResultsDirectory>.\TestResults</ResultsDirectory>
    
    <!-- Target platform (x86, x64, ARM) -->
    <TargetPlatform>x64</TargetPlatform>
    
    <!-- Target framework -->
    <TargetFrameworkVersion>net9.0</TargetFrameworkVersion>
  </RunConfiguration>

  <!-- Konfiguracja Data Collectors -->
  <DataCollectionRunSettings>
    <DataCollectors>
      <!-- Code Coverage -->
      <DataCollector friendlyName="XPlat Code Coverage">
        <Configuration>
          <Format>cobertura,json</Format>
          <Exclude>[*.Tests]*,[*.E2ETests]*</Exclude>
          <ExcludeByFile>**/Migrations/*.cs</ExcludeByFile>
        </Configuration>
      </DataCollector>
      
      <!-- Blame Collector (diagnostyka zawieszających się testów) -->
      <DataCollector friendlyName="blame" enabled="True">
        <Configuration>
          <CollectDump DumpType="full" />
        </Configuration>
      </DataCollector>
    </DataCollectors>
  </DataCollectionRunSettings>

  <!-- Konfiguracja logowania -->
  <LoggerRunSettings>
    <Loggers>
      <Logger friendlyName="console" enabled="True">
        <Configuration>
          <Verbosity>normal</Verbosity>
        </Configuration>
      </Logger>
      <Logger friendlyName="trx" enabled="True">
        <Configuration>
          <LogFileName>test-results.trx</LogFileName>
        </Configuration>
      </Logger>
    </Loggers>
  </LoggerRunSettings>

  <!-- Konfiguracja xUnit -->
  <xUnit>
    <ParallelizeAssembly>true</ParallelizeAssembly>
    <ParallelizeTestCollections>true</ParallelizeTestCollections>
    <MaxParallelThreads>8</MaxParallelThreads>
  </xUnit>

  <!-- Konfiguracja NUnit (dla E2E tests) -->
  <NUnit>
    <NumberOfTestWorkers>4</NumberOfTestWorkers>
    <DefaultTimeout>30000</DefaultTimeout>
  </NUnit>
</RunSettings>
